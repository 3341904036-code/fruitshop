<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è®¢å•ç®¡ç† - æ°´æœå•†åŸç®¡ç†ç³»ç»Ÿ</title>
  <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      min-height: 100vh;
      font-family: "Microsoft YaHei", sans-serif;
      background-color: #f8f9fa;
    }
    .navbar {
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      z-index: 1000;
    }
    .navbar-brand {
      font-size: 1.25rem;
      font-weight: 700;
      color: #fff !important;
    }
    .nav-link {
      color: #fff !important;
      transition: all 0.3s;
    }
    .nav-link:hover {
      color: #ffc107 !important;
    }
    .main-content {
      padding: 2rem 0;
    }
    .container {
      max-width: 1200px;
    }
    .card {
      border: none;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      overflow: hidden;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.12);
    }
    .card-header {
      background-color: #fd7e14;
      color: #fff;
      font-weight: 600;
      border-bottom: none;
    }
    .table-responsive {
      border-radius: 8px;
      overflow: hidden;
    }
    .table {
      margin-bottom: 0;
    }
    .table th {
      background-color: #f8f9fa;
      font-weight: 600;
      border-top: none;
    }
    .btn {
      border-radius: 6px;
      font-weight: 500;
      transition: all 0.2s;
    }
    .btn:hover {
      transform: scale(1.02);
    }
    .action-btn {
      margin-right: 0.25rem;
      margin-bottom: 0.25rem;
    }
    .search-section {
      margin-bottom: 1.5rem;
    }
    .pagination {
      margin-bottom: 0;
    }
    .footer {
      background-color: #212529;
      color: #fff;
      padding: 1.5rem 0;
      text-align: center;
      font-size: 0.9rem;
    }
    .order-status-pending {
      color: #ffc107;
      font-weight: bold;
    }
    .order-status-completed {
      color: #28a745;
      font-weight: bold;
    }
    .order-status-cancelled {
      color: #dc3545;
      font-weight: bold;
    }
    .disabled-btn {
      cursor: not-allowed;
      opacity: 0.6;
    }
    /* æ–°å¢ï¼šè¯¦æƒ…æ¨¡æ€æ¡†æ ·å¼ */
    .modal-header {
      background-color: #fd7e14;
      color: #fff;
      border-bottom: none;
    }
    .modal-title {
      font-weight: 600;
    }
    .modal-footer {
      border-top: none;
    }
    .detail-table th {
      width: 20%;
    }
    .item-table th {
      font-size: 0.9rem;
    }
    .item-table td {
      vertical-align: middle;
    }
    .subtotal-text {
      font-weight: 600;
      color: #dc3545;
    }
    @media (max-width: 768px) {
      .main-content {
        padding: 1rem 0;
      }
      .card-body {
        padding: 1rem;
      }
      .btn {
        margin-bottom: 0.25rem;
      }
      .detail-table th {
        width: 30%;
      }
    }
  </style>
</head>
<body>
<!-- å¯¼èˆªæ  -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand" th:href="@{/index.html}">ğŸ æ°´æœå•†åŸç®¡ç†ç³»ç»Ÿ</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link" th:href="@{/index.html}">é¦–é¡µ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" th:href="@{/customer/list}">é¡¾å®¢ç®¡ç†</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" th:href="@{/fruit/list}">æ°´æœç®¡ç†</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" th:href="@{/order/list}">è®¢å•ç®¡ç†</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" th:href="@{/supplier/list}">ä¾›åº”å•†ç®¡ç†</a>
        </li>
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
            <span th:text="${session.loginUser?.showName ?: 'æ¸¸å®¢'}">é¡¾å®¢10099</span>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" th:href="@{/api/auth/logout}">é€€å‡ºç™»å½•</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- ä¸»è¦å†…å®¹åŒº -->
<div class="main-content container">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">è®¢å•åˆ—è¡¨</h5>
      <a href="#" th:href="@{/order/add}" class="btn btn-success">
        <i class="bi bi-plus-circle"></i> æ–°å¢è®¢å•
      </a>
    </div>
    <div class="card-body">
      <!-- æœç´¢åŒºåŸŸ -->
      <div class="search-section">
        <div class="row g-3">
          <div class="col-md-3">
            <input type="text" class="form-control" id="searchOrderNum" placeholder="æœç´¢è®¢å•å·...">
          </div>
          <div class="col-md-3">
            <input type="text" class="form-control" id="searchCustomer" placeholder="æœç´¢é¡¾å®¢ID...">
          </div>
          <div class="col-md-3">
            <select class="form-select" id="searchStatus" disabled>
              <option value="">å…¨éƒ¨çŠ¶æ€</option>
              <option value="pending">å¾…å¤„ç†</option>
              <option value="completed">å·²å®Œæˆ</option>
              <option value="cancelled">å·²å–æ¶ˆ</option>
            </select>
          </div>
          <div class="col-md-3">
            <button class="btn btn-primary" onclick="searchOrders()">æœç´¢</button>
            <button class="btn btn-secondary" onclick="resetSearch()">é‡ç½®</button>
          </div>
        </div>
      </div>

      <!-- è¡¨æ ¼ -->
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
          <tr>
            <th>è®¢å•å·</th>
            <th>é¡¾å®¢IDï¼ˆåç§°ï¼‰</th>
            <th>åŸä»·</th>
            <th>æŠ˜æ‰£</th>
            <th>å®ä»˜é‡‘é¢</th>
            <th>ä¸‹å•æ—¶é—´</th>
            <th>æ“ä½œ</th>
          </tr>
          </thead>
          <tbody id="orderTableBody">
          <!-- åŠ¨æ€å¡«å……æ•°æ® -->
          </tbody>
        </table>
      </div>

      <!-- åˆ†é¡µï¼šåç«¯æœªå®ç°åˆ†é¡µæ—¶éšè— -->
      <nav aria-label="è®¢å•åˆ—è¡¨åˆ†é¡µ" class="mt-3 d-none" id="paginationContainer">
        <ul class="pagination justify-content-center" id="pagination">
          <!-- åŠ¨æ€ç”Ÿæˆåˆ†é¡µæŒ‰é’® -->
        </ul>
      </nav>
    </div>
  </div>
</div>

<!-- æ–°å¢ï¼šè®¢å•è¯¦æƒ…æ¨¡æ€æ¡† -->
<div class="modal fade" id="orderDetailModal" tabindex="-1" aria-labelledby="orderDetailModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="orderDetailModalLabel">è®¢å•è¯¦æƒ… - <span id="modalOrderNum">0</span></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- è®¢å•ä¸»ä¿¡æ¯ -->
        <table class="table table-borderless detail-table mb-4">
          <tbody>
          <tr>
            <th>è®¢å•å·</th>
            <td id="detailOrderNum">-</td>
          </tr>
          <tr>
            <th>é¡¾å®¢ID</th>
            <td id="detailCustomerId">-</td>
          </tr>
          <tr>
            <th>ä¸‹å•æ—¶é—´</th>
            <td id="detailOrderTime">-</td>
          </tr>
          <tr>
            <th>è®¢å•åŸä»·</th>
            <td id="detailOriginalPrice">-</td>
          </tr>
          <tr>
            <th>æŠ˜æ‰£</th>
            <td id="detailDiscount">-</td>
          </tr>
          <tr>
            <th>å®ä»˜é‡‘é¢</th>
            <td id="detailPayPrice" class="subtotal-text">-</td>
          </tr>
          </tbody>
        </table>

        <!-- è®¢å•é¡¹åˆ—è¡¨ -->
        <h6 class="mb-2">å•†å“æ˜ç»†</h6>
        <div class="table-responsive">
          <table class="table table-striped table-sm item-table">
            <thead>
            <tr>
              <th>å•†å“åºå·</th>
              <th>æ°´æœID</th>
              <th>æ°´æœåç§°</th>
              <th>è´­ä¹°æ•°é‡</th>
              <th>å•ä»·</th>
              <th>å°è®¡</th>
            </tr>
            </thead>
            <tbody id="orderItemsTableBody">
            <tr>
              <td colspan="6" class="text-center text-muted">åŠ è½½ä¸­...</td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å…³é—­</button>
      </div>
    </div>
  </div>
</div>

<!-- é¡µè„š -->
<div class="footer">
  <p class="mb-0">Â© 2026 æ°´æœå•†åŸç®¡ç†ç³»ç»Ÿ - ç‰ˆæƒæ‰€æœ‰</p>
</div>

<!-- å¼•å…¥JSèµ„æº -->
<script th:src="@{/js/jquery-3.6.4.min.js}"></script>
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/js/axios.min.js}"></script>

<!-- è‡ªå®šä¹‰JSé€»è¾‘ -->
<script>
  // å…¨å±€åˆ†é¡µå˜é‡ï¼ˆåç«¯æœªå®ç°åˆ†é¡µï¼Œæš‚æ—¶ç¦ç”¨ï¼‰
  let currentPage = 1;
  const pageSize = 10; // æ¯é¡µæ˜¾ç¤ºæ¡æ•°
  const contextPath = '/fruitshop'; // ç»Ÿä¸€ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œé¿å…ç¡¬ç¼–ç 
  // ç¼“å­˜æ‰€æœ‰è®¢å•æ•°æ®ï¼ˆç”¨äºå‰ç«¯æœç´¢/ç­›é€‰ï¼‰
  let allOrders = [];
  // æ¨¡æ€æ¡†å®ä¾‹
  let orderDetailModal;

  // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
  $(document).ready(function() {
    loadOrders(currentPage);
    // åˆå§‹åŒ–æ¨¡æ€æ¡†
    orderDetailModal = new bootstrap.Modal(document.getElementById('orderDetailModal'));
  });

  /**
   * åŠ è½½è®¢å•åˆ—è¡¨æ•°æ®ï¼ˆç¦ç”¨åˆ†é¡µï¼ŒåŠ è½½å…¨éƒ¨æ•°æ®ï¼‰
   */
  function loadOrders(page) {
    currentPage = page;
    // ç¦ç”¨åˆ†é¡µå‚æ•°ï¼Œç›´æ¥åŠ è½½å…¨éƒ¨æ•°æ®
    const url = `${contextPath}/api/order/list/all`;

    axios.get(url)
            .then(res => {
              console.log("ã€åŠ è½½è®¢å•ã€‘åç«¯å®Œæ•´å“åº”ï¼š", res);
              console.log("ã€åŠ è½½è®¢å•ã€‘åç«¯ä¸šåŠ¡æ•°æ®ï¼š", res.data);

              if (res.data && res.data.code === 200) {
                allOrders = Array.isArray(res.data.data) ? res.data.data : [];
                console.log("ã€åŠ è½½è®¢å•ã€‘å¾…æ¸²æŸ“æ•°æ®ï¼š", allOrders);
                renderOrderTable(allOrders);
                // åç«¯å®ç°åˆ†é¡µåå†æ˜¾ç¤ºåˆ†é¡µ
                // $('#paginationContainer').removeClass('d-none');
                // generatePagination(currentPage, Math.ceil(allOrders.length / pageSize));
              } else {
                alert('è·å–è®¢å•åˆ—è¡¨å¤±è´¥: ' + (res.data?.message || 'æœªçŸ¥é”™è¯¯'));
              }
            })
            .catch(err => {
              console.error('ã€åŠ è½½è®¢å•ã€‘è¯·æ±‚å¤±è´¥ï¼š', err);
              alert(`è·å–è®¢å•åˆ—è¡¨å¤±è´¥ï¼šè¯·æ±‚URL=${url}ï¼Œè¯·æ£€æŸ¥æ¥å£è·¯å¾„æ˜¯å¦æ­£ç¡®`);
            });
  }

  /**
   * æ¸²æŸ“è®¢å•è¡¨æ ¼æ•°æ®ï¼ˆé€‚é…åç«¯çœŸå®è¿”å›çš„å­—æ®µï¼‰
   */
  function renderOrderTable(orders) {
    const tbody = $('#orderTableBody');
    tbody.empty();

    if (orders.length === 0) {
      tbody.append(`
        <tr>
            <td colspan="7" class="text-center text-muted">æš‚æ— è®¢å•æ•°æ®</td>
        </tr>
      `);
      return;
    }

    orders.forEach((order) => {
      // é€‚é…åç«¯çœŸå®è¿”å›çš„å­—æ®µï¼ˆå…³é”®ä¿®æ”¹ï¼šä½¿ç”¨çœŸå®è®¢å•å·ã€é¡¾å®¢IDï¼‰
      const oNum = order.oNum || order.onum; // çœŸå®è®¢å•å·ï¼ˆå¦‚50002ï¼‰
      const cId = order.cId || order.cid; // çœŸå®é¡¾å®¢IDï¼ˆå¦‚10000ï¼‰
      const cnameDisplay = `é¡¾å®¢ID:${cId}`; // ä¼˜åŒ–æ˜¾ç¤º
      const originalPrice = order.originalPrice || 0; // åŸä»·
      const discount = (order.discount || 1) * 10; // æŠ˜æ‰£Ã—10ï¼ˆå¦‚1â†’10æŠ˜ï¼‰
      const pay = order.pay || 0; // å®ä»˜é‡‘é¢
      const oDate = order.oDate || order.odate; // ä¸‹å•æ—¶é—´

      // æ ¼å¼åŒ–ä¸‹å•æ—¶é—´
      const orderTimeText = formatDate(oDate);

      // æ„å»ºè¡¨æ ¼è¡Œï¼ˆç§»é™¤çŠ¶æ€åˆ—ï¼Œå› æ•°æ®åº“æ— statuså­—æ®µï¼›å®Œæˆ/å–æ¶ˆæŒ‰é’®æ·»åŠ ç¦ç”¨æç¤ºï¼‰
      const row = `
        <tr>
            <td>${oNum}</td>
            <td>${cnameDisplay}</td>
            <td>Â¥${Number(originalPrice).toFixed(2)}</td>
            <td>${discount}æŠ˜</td>
            <td>Â¥${Number(pay).toFixed(2)}</td>
            <td>${orderTimeText}</td>
            <td>
                <button class="btn btn-sm btn-outline-primary action-btn" onclick="viewDetails('${oNum}')">è¯¦æƒ…</button>
                <button class="btn btn-sm btn-outline-success action-btn disabled-btn" onclick="showUnavailableTip()">å®Œæˆ</button>
                <button class="btn btn-sm btn-outline-danger action-btn disabled-btn" onclick="showUnavailableTip()">å–æ¶ˆ</button>
            </td>
        </tr>
      `;
      tbody.append(row);
    });
  }

  /**
   * æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´æ˜¾ç¤º
   */
  function formatDate(dateStr) {
    if (!dateStr) return 'æœªçŸ¥æ—¶é—´';
    try {
      const date = new Date(dateStr);
      // æ ¼å¼åŒ–ä¸ºYYYY-MM-DD HH:MM:SS
      return `${date.getFullYear()}-${(date.getMonth()+1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;
    } catch (e) {
      return 'æ ¼å¼é”™è¯¯';
    }
  }

  /**
   * æŸ¥çœ‹è®¢å•è¯¦æƒ…ï¼ˆè°ƒç”¨åç«¯æ¥å£ï¼Œæ¸²æŸ“æ¨¡æ€æ¡†ï¼‰
   */
  function viewDetails(oNum) {
    if (!oNum) {
      alert('è®¢å•å·ä¸èƒ½ä¸ºç©ºï¼');
      return;
    }

    // æ¸…ç©ºæ¨¡æ€æ¡†åŸæœ‰æ•°æ®
    clearModalData();
    // è®¾ç½®æ¨¡æ€æ¡†æ ‡é¢˜çš„è®¢å•å·
    $('#modalOrderNum').text(oNum);

    // è°ƒç”¨åç«¯è¯¦æƒ…æ¥å£
    const url = `${contextPath}/api/order/detail/${oNum}`;
    axios.get(url)
            .then(res => {
              console.log("ã€è®¢å•è¯¦æƒ…ã€‘åç«¯å“åº”ï¼š", res);
              if (res.data && res.data.code === 200) {
                const order = res.data.data;
                // æ¸²æŸ“è®¢å•ä¸»ä¿¡æ¯
                renderOrderDetail(order);
                // æ¸²æŸ“è®¢å•é¡¹
                renderOrderItems(order.orderItems || []);
                // æ˜¾ç¤ºæ¨¡æ€æ¡†
                orderDetailModal.show();
              } else {
                alert('è·å–è®¢å•è¯¦æƒ…å¤±è´¥: ' + (res.data?.message || 'æœªçŸ¥é”™è¯¯'));
              }
            })
            .catch(err => {
              console.error('ã€è®¢å•è¯¦æƒ…ã€‘è¯·æ±‚å¤±è´¥ï¼š', err);
              // æ¸²æŸ“ç©ºæ•°æ®æç¤º
              $('#orderItemsTableBody').html(`
          <tr>
            <td colspan="6" class="text-center text-danger">è·å–è¯¦æƒ…å¤±è´¥ï¼š${err.message || 'æ¥å£è°ƒç”¨å¼‚å¸¸'}</td>
          </tr>
        `);
              // æ˜¾ç¤ºæ¨¡æ€æ¡†ï¼ˆå¸¦å¤±è´¥æç¤ºï¼‰
              orderDetailModal.show();
            });
  }

  /**
   * æ¸²æŸ“è®¢å•ä¸»ä¿¡æ¯åˆ°æ¨¡æ€æ¡†
   */
  function renderOrderDetail(order) {
    $('#detailOrderNum').text(order.oNum || order.onum || '-');
    $('#detailCustomerId').text(order.cId || order.cid || '-');
    $('#detailOrderTime').text(formatDate(order.oDate || order.odate || '-'));
    $('#detailOriginalPrice').text(`Â¥${Number(order.originalPrice || 0).toFixed(2)}`);
    $('#detailDiscount').text(`${Number(order.discount || 1) * 10}æŠ˜`);
    $('#detailPayPrice').text(`Â¥${Number(order.pay || 0).toFixed(2)}`);
  }

  /**
   * æ¸²æŸ“è®¢å•é¡¹åˆ°æ¨¡æ€æ¡†
   */
  function renderOrderItems(items) {
    const tbody = $('#orderItemsTableBody');
    tbody.empty();

    if (items.length === 0) {
      tbody.append(`
        <tr>
          <td colspan="6" class="text-center text-muted">è¯¥è®¢å•æš‚æ— å•†å“æ˜ç»†</td>
        </tr>
      `);
      return;
    }

    items.forEach((item, index) => {
      const row = `
        <tr>
          <td>${item.oItem || index + 1}</td>
          <td>${item.fId || item.fid || '-'}</td>
          <td>${item.fName || item.fname || 'æœªçŸ¥æ°´æœ'}</td>
          <td>${item.quantity || 0}</td>
          <td>Â¥${Number(item.itemPrice || 0).toFixed(2)}</td>
          <td>Â¥${Number(item.subtotal || 0).toFixed(2)}</td>
        </tr>
      `;
      tbody.append(row);
    });
  }

  /**
   * æ¸…ç©ºæ¨¡æ€æ¡†æ•°æ®
   */
  function clearModalData() {
    $('#detailOrderNum').text('-');
    $('#detailCustomerId').text('-');
    $('#detailOrderTime').text('-');
    $('#detailOriginalPrice').text('-');
    $('#detailDiscount').text('-');
    $('#detailPayPrice').text('-');
    $('#orderItemsTableBody').html(`
      <tr>
        <td colspan="6" class="text-center text-muted">åŠ è½½ä¸­...</td>
      </tr>
    `);
  }

  /**
   * æç¤ºåŠŸèƒ½æš‚ä¸å¯ç”¨ï¼ˆå› æ•°æ®åº“æ— statuså­—æ®µï¼‰
   */
  function showUnavailableTip() {
    alert('è®¢å•å®Œæˆ/å–æ¶ˆåŠŸèƒ½æš‚æœªå®ç°ï¼šæ•°æ®åº“ordersè¡¨æœªé…ç½®è®¢å•çŠ¶æ€ï¼ˆstatusï¼‰å­—æ®µï¼Œè¯·å…ˆåœ¨åç«¯æ·»åŠ è¯¥å­—æ®µå¹¶å®ç°å¯¹åº”æ›´æ–°æ¥å£ã€‚');
  }

  /**
   * æœç´¢è®¢å•ï¼ˆå‰ç«¯æœ¬åœ°ç­›é€‰ï¼Œé€‚é…çœŸå®å­—æ®µï¼‰
   */
  function searchOrders() {
    const orderNum = $('#searchOrderNum').val().trim().toLowerCase();
    const customerId = $('#searchCustomer').val().trim();

    // å‰ç«¯æœ¬åœ°ç­›é€‰æ•°æ®
    let filteredOrders = allOrders;

    // æŒ‰è®¢å•å·ç­›é€‰ï¼ˆçœŸå®è®¢å•å·ï¼Œå¦‚50002ï¼‰
    if (orderNum) {
      filteredOrders = filteredOrders.filter(item => {
        const onum = (item.oNum || item.onum || '').toString().toLowerCase();
        return onum.includes(orderNum);
      });
    }

    // æŒ‰é¡¾å®¢IDç­›é€‰ï¼ˆçœŸå®é¡¾å®¢IDï¼Œå¦‚10000ï¼‰
    if (customerId) {
      filteredOrders = filteredOrders.filter(item => {
        const cid = (item.cId || item.cid || '').toString();
        return cid === customerId;
      });
    }

    // æ¸²æŸ“ç­›é€‰åçš„æ•°æ®
    renderOrderTable(filteredOrders);
  }

  /**
   * é‡ç½®æœç´¢æ¡ä»¶
   */
  function resetSearch() {
    $('#searchOrderNum').val('');
    $('#searchCustomer').val('');
    renderOrderTable(allOrders); // ç›´æ¥æ¸²æŸ“å…¨éƒ¨æ•°æ®
  }

  /**
   * ç”Ÿæˆåˆ†é¡µæŒ‰é’®ï¼ˆåç«¯å®ç°åˆ†é¡µåå¯ç”¨ï¼‰
   */
  function generatePagination(current, total) {
    const pagination = $('#pagination');
    pagination.empty();

    if (total <= 1) return;

    // ä¸Šä¸€é¡µæŒ‰é’®
    const prevItem = `
      <li class="page-item ${current <= 1 ? 'disabled' : ''}">
          <a class="page-link" href="#" onclick="loadOrders(${Math.max(1, current - 1)})">ä¸Šä¸€é¡µ</a>
      </li>
    `;

    // ä¸‹ä¸€é¡µæŒ‰é’®
    const nextItem = `
      <li class="page-item ${current >= total ? 'disabled' : ''}">
          <a class="page-link" href="#" onclick="loadOrders(${Math.min(total, current + 1)})">ä¸‹ä¸€é¡µ</a>
      </li>
    `;

    pagination.append(prevItem);
    // æ·»åŠ é¡µç æ•°å­—æŒ‰é’®
    for (let i = 1; i <= total; i++) {
      pagination.append(`
        <li class="page-item ${i === current ? 'active' : ''}">
            <a class="page-link" href="#" onclick="loadOrders(${i})">${i}</a>
        </li>
      `);
    }
    pagination.append(nextItem);
  }
</script>
</body>
</html>